# Dynamic GitHub Runners - Guide

–î–∞—Ç–∞: 18 –Ω–æ—è–±—Ä—è 2025  
–°—Ç–∞—Ç—É—Å: ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

## üéØ –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É GitHub runners** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á.

---

## üìä Workflows —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

### 1. **deploy-single-node.yml** - –†–∞—Å–∫–∞—Ç–∫–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä

**–ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–æ —Ä–∞–Ω–Ω–µ—Ä–æ–≤:** 2 (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)

#### Job 1: üì¶ Build N8N Image
- –°–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑
- –ü—É—à–∏—Ç –≤ DockerHub (—Ç–æ–ª—å–∫–æ –¥–ª—è production)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç layer caching –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- **–í—Ä–µ–º—è:** ~3-5 –º–∏–Ω—É—Ç
- **–†–µ—Å—É—Ä—Å—ã:** 2 vCPU, 7GB RAM

#### Job 2: üöÄ Deploy to K8s
- –ñ–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Job 1
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –û–∂–∏–¥–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –ø–æ–¥–æ–≤
- **–í—Ä–µ–º—è:** ~2-3 –º–∏–Ω—É—Ç—ã
- **–†–µ—Å—É—Ä—Å—ã:** 2 vCPU, 7GB RAM

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
```yaml
concurrency:
  group: deploy-${{ github.event.inputs.environment }}
  cancel-in-progress: false
```
- –¢–æ–ª—å–∫–æ 1 –¥–µ–ø–ª–æ–π –Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ç–æ—Ä–æ–π –¥–µ–ø–ª–æ–π –≤ production ‚Äî –æ–Ω –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ

---

### 2. **scrape-parallel.yml** - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Å–∫—Ä–∞–ø–∏–Ω–≥

**–ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–æ —Ä–∞–Ω–Ω–µ—Ä–æ–≤:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ (1-10)

#### Job 1: üìã Prepare Tasks
- –ü–∞—Ä—Å–∏—Ç —Å–ø–∏—Å–æ–∫ URLs –∏–∑ input
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π matrix
- –ù–∞–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ–∫—Å–∏ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ
- **–í—Ä–µ–º—è:** ~10 —Å–µ–∫—É–Ω–¥
- **–†–µ—Å—É—Ä—Å—ã:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ

#### Job 2: üåê Scrape (Matrix)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç N –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ä–∞–Ω–Ω–µ—Ä–æ–≤
- –ö–∞–∂–¥—ã–π —Ä–∞–Ω–Ω–µ—Ä —Å–∫—Ä–∞–ø–∏—Ç —Å–≤–æ–π URL —á–µ—Ä–µ–∑ —Å–≤–æ–π –ø—Ä–æ–∫—Å–∏
- `max-parallel` –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É
- **–í—Ä–µ–º—è:** ~5-10 –º–∏–Ω—É—Ç –Ω–∞ URL
- **–†–µ—Å—É—Ä—Å—ã:** 2 vCPU √ó N —Ä–∞–Ω–Ω–µ—Ä–æ–≤

#### Job 3: üìä Summary
- –°–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö —Ä–∞–Ω–Ω–µ—Ä–æ–≤
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç
- **–í—Ä–µ–º—è:** ~30 —Å–µ–∫—É–Ω–¥

**–ü—Ä–∏–º–µ—Ä:**
```yaml
inputs:
  target_urls: 'https://site1.com,https://site2.com,https://site3.com'
  max_parallel_runners: '2'
  use_proxy: true
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
1. Prepare Tasks —Å–æ–∑–¥–∞—Å—Ç matrix –∏–∑ 3 –∑–∞–¥–∞—á
2. –ó–∞–ø—É—Å—Ç—è—Ç—Å—è **2 —Ä–∞–Ω–Ω–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** (site1 + site2)
3. –ö–æ–≥–¥–∞ site1 –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è ‚Üí —Ä–∞–Ω–Ω–µ—Ä –≤–æ–∑—å–º—ë—Ç site3
4. –ò—Ç–æ–≥–æ: 3 —Å–∞–π—Ç–∞ —á–µ—Ä–µ–∑ 2 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ä–∞–Ω–Ω–µ—Ä–∞

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: 3 √ó 10 –º–∏–Ω = 30 –º–∏–Ω
- –° 2 —Ä–∞–Ω–Ω–µ—Ä–∞–º–∏: (3/2) √ó 10 –º–∏–Ω = **~15 –º–∏–Ω** ‚ö°

---

## ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–æ–π

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã max_parallel_runners

| –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|----------|----------|-------------------|
| 1 | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ | –≠–∫–æ–Ω–æ–º–∏—è minutes, –ª—ë–≥–∫–∏–µ —Å–∞–π—Ç—ã |
| 2 | **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é** | –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/—Ä–µ—Å—É—Ä—Å—ã |
| 3 | –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ | –ú–Ω–æ–≥–æ —Å–∞–π—Ç–æ–≤, —Å—Ä–µ–¥–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã |
| 5 | –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ | –ú–Ω–æ–≥–æ —Å–∞–π—Ç–æ–≤, –µ—Å—Ç—å minutes |
| 10 | –ú–∞–∫—Å–∏–º—É–º | –°—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏, unlimited minutes |

### –õ–∏–º–∏—Ç—ã GitHub

#### GitHub Free (public repo):
- ‚úÖ **20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö jobs**
- ‚úÖ **Unlimited minutes**
- ‚úÖ –ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å max-parallel: 10

#### GitHub Free (private repo):
- ‚úÖ **20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö jobs**
- ‚ö†Ô∏è **2000 minutes/–º–µ—Å—è—Ü**
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π max-parallel: 2-3

#### GitHub Pro:
- ‚úÖ **20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö jobs**
- ‚úÖ **3000 minutes/–º–µ—Å—è—Ü**
- ‚úÖ –ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å max-parallel: 5

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –î–æ–±–∞–≤–∏—Ç—å secrets –≤ GitHub

```bash
# DockerHub credentials
gh secret set DOCKERHUB_USERNAME --body "your_username"
gh secret set DOCKERHUB_TOKEN --body "your_token"

# Kubernetes config (base64-encoded)
cat ~/.kube/config | base64 -w 0 | gh secret set KUBECONFIG --body-file -

# Server IP
gh secret set SERVER_IP --body "31.56.39.58"
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å workflows

#### Deploy –≤ –∫–ª–∞—Å—Ç–µ—Ä:
```bash
gh workflow run deploy-single-node.yml -f environment=production
```

#### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π scraping:
```bash
gh workflow run scrape-parallel.yml \
  -f target_urls='https://site1.com,https://site2.com,https://site3.com' \
  -f max_parallel_runners='2' \
  -f use_proxy='true'
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü—Ä–∏–º–µ—Ä: –°–∫—Ä–∞–ø–∏–Ω–≥ 10 —Å–∞–π—Ç–æ–≤

| max_parallel | –í—Ä–µ–º—è | –†–∞–Ω–Ω–µ—Ä—ã | Minutes –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ |
|--------------|-------|---------|---------------------|
| 1 | 100 –º–∏–Ω | 1 | 100 |
| 2 | **50 –º–∏–Ω** | 2 | 100 |
| 5 | **20 –º–∏–Ω** | 5 | 100 |
| 10 | **10 –º–∏–Ω** | 10 | 100 |

**–í—ã–≤–æ–¥:** –ë–æ–ª—å—à–µ —Ä–∞–Ω–Ω–µ—Ä–æ–≤ = –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ —Ç–µ –∂–µ minutes!

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏

```yaml
use_proxy: true
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
- Task 0 ‚Üí proxy-1
- Task 1 ‚Üí proxy-2
- Task 2 ‚Üí proxy-3
- Task 3 ‚Üí proxy-1 (—Ä–æ—Ç–∞—Ü–∏—è)
- –ò —Ç.–¥.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–æ IP
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- –û–±—Ö–æ–¥ rate limits

---

## üéõÔ∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π matrix –∏–∑ —Ñ–∞–π–ª–∞

```yaml
- name: Load URLs from file
  id: load-urls
  run: |
    URLS=$(cat urls.txt | jq -R -s -c 'split("\n") | map(select(length > 0))')
    echo "urls=$URLS" >> $GITHUB_OUTPUT

strategy:
  matrix:
    url: ${{ fromJSON(steps.load-urls.outputs.urls) }}
  max-parallel: ${{ github.event.inputs.max_parallel_runners }}
```

### 2. Retry –Ω–∞ fail

```yaml
- name: Scrape with retry
  uses: nick-invision/retry@v2
  with:
    timeout_minutes: 10
    max_attempts: 3
    retry_wait_seconds: 30
    command: node scraper.js --url "${{ matrix.url }}"
```

### 3. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ –∏–∑ secrets

```yaml
env:
  PROXY_LIST: ${{ secrets.PROXY_LIST }}  # "proxy1.com,proxy2.com,proxy3.com"
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è single-node –∫–ª–∞—Å—Ç–µ—Ä–∞:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π **max-parallel: 2-3** –¥–ª—è –¥–µ–ø–ª–æ—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π **max-parallel: 2-5** –¥–ª—è scraping
- ‚ö†Ô∏è –ù–µ —Å—Ç–∞–≤—å –±–æ–ª—å—à–µ 10 ‚Äî –ø–µ—Ä–µ–≥—Ä—É–∑–∏—à—å GitHub billing

### –î–ª—è production scraping:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–Ω–Ω–µ—Ä–∞
- ‚úÖ –î–æ–±–∞–≤—å retry –ª–æ–≥–∏–∫—É
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∫ artifacts
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å success rate —á–µ—Ä–µ–∑ summary

### –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ minutes:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π caching –¥–ª—è npm/pip –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π `if: github.event.inputs.environment == 'production'` –¥–ª—è –¥–æ—Ä–æ–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ Fail-fast: false ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–∞–∂–µ –µ—Å–ª–∏ 1 —Ä–∞–Ω–Ω–µ—Ä —É–ø–∞–ª

---

## ‚úÖ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É —Ä–∞–Ω–Ω–µ—Ä–æ–≤** (1-10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏**  
‚úÖ **Concurrency control** (1 –¥–µ–ø–ª–æ–π –Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)  
‚úÖ **Matrix-based –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** –¥–ª—è scraping  
‚úÖ **Fail-safe –ª–æ–≥–∏–∫—É** (–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)  

**–ú–æ–∂–µ—à—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å scraping –æ—Ç 1 –¥–æ 20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ä–∞–Ω–Ω–µ—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á–∏!** üéâ

---

**–ê–≤—Ç–æ—Ä:** KomarovAI  
**–î–∞—Ç–∞:** 18.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ PRODUCTION-READY
