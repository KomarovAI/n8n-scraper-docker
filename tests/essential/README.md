# üß™ Essential Smoke Tests

–î–≤–∞ —Å–∞–º—ã—Ö –±–∞–∑–æ–≤—ã—Ö –∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ n8n-scraper-docker.

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —ç—Ç–∏ —Ç–µ—Å—Ç—ã?

### Test #1: Health Check (`test_health.sh`)

üü¢ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**

- ‚úÖ n8n –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
- ‚úÖ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
- ‚úÖ Redis –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
- ‚úÖ n8n HTTP endpoint –¥–æ—Å—Ç—É–ø–µ–Ω (http://localhost:5678)
- ‚úÖ Prometheus –¥–æ—Å—Ç—É–ø–µ–Ω (http://localhost:9090)
- ‚úÖ Grafana –¥–æ—Å—Ç—É–ø–Ω–∞ (http://localhost:3000)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5 —Å–µ–∫—É–Ω–¥

---

### Test #2: Workflow Smoke Test (`test_workflow.sh`)

üü¢ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å n8n:**

- ‚úÖ n8n API –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ Healthz endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Webhook workflow –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3 —Å–µ–∫—É–Ω–¥—ã

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ Docker Compose
docker --version
docker-compose --version

# –°–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
docker-compose up -d
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
bash tests/essential/run_all_tests.sh
```

### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–æ–ª—å–∫–æ Health Check
bash tests/essential/test_health.sh

# –¢–æ–ª—å–∫–æ Workflow Test
bash tests/essential/test_workflow.sh
```

---

## üìÑ –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
============================================
  üß™ ESSENTIAL SMOKE TESTS
  n8n-scraper-docker
============================================

üìÖ 2025-11-27 17:35:42

üõ†Ô∏è  –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
  - Docker: 24.0.7
  - Docker Compose: 2.23.0

üìÇ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

‚û°Ô∏è  –¢–ï–°–¢ 1/2: Health Check
========================================
Essential Test #1: Health Check
========================================

üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤...
----------------------------------------
[–¢–µ—Å—Ç 1] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ n8n... ‚úÖ OK (Up 2 hours)
[–¢–µ—Å—Ç 2] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ postgres... ‚úÖ OK (Up 2 hours)
[–¢–µ—Å—Ç 3] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ redis... ‚úÖ OK (Up 2 hours)

üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤...
----------------------------------------
[–¢–µ—Å—Ç 4] –ü—Ä–æ–≤–µ—Ä–∫–∞ n8n... ‚úÖ OK (HTTP 200)
[–¢–µ—Å—Ç 5] –ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus... ‚úÖ OK (HTTP 200)
[–¢–µ—Å—Ç 6] –ü—Ä–æ–≤–µ—Ä–∫–∞ Grafana... ‚úÖ OK (HTTP 200)

========================================
üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
========================================
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 6
–£—Å–ø–µ—à–Ω—ã—Ö: 6
–ü—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã—Ö: 0

‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–®–õ–ò –£–°–ü–ï–®–ù–û!

============================================
üèÅ –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´
============================================
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 2
–£—Å–ø–µ—à–Ω—ã—Ö: 2
–ü—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã—Ö: 0

============================================
‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–®–õ–ò –£–°–ü–ï–®–ù–û!
============================================

‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!
üåê n8n: http://localhost:5678
üìä Grafana: http://localhost:3000
üî• Prometheus: http://localhost:9090
```

---

## ‚öôÔ∏è –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö?

### ‚ùå –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–ª–µ–Ω—ã

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# 2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
docker-compose logs -f

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart

# 4. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose down
docker-compose up -d --build

# 5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ—Å—Ç—ã
sleep 30
bash tests/essential/run_all_tests.sh
```

### üìä –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**n8n –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:**
```bash
docker-compose logs n8n
docker-compose restart n8n
```

**PostgreSQL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
docker-compose logs postgres
docker-compose restart postgres
```

**Redis –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
docker-compose logs redis
docker-compose restart redis
```

---

## üìö –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

### GitHub Actions

```yaml
name: Essential Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Start services
        run: docker-compose up -d
      
      - name: Wait for services
        run: sleep 30
      
      - name: Run essential tests
        run: bash tests/essential/run_all_tests.sh
      
      - name: Cleanup
        if: always()
        run: docker-compose down -v
```

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –≤ `Makefile`:

```makefile
test-essential:
	@bash tests/essential/run_all_tests.sh

test-health:
	@bash tests/essential/test_health.sh

test-workflow:
	@bash tests/essential/test_workflow.sh
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
make test-essential
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

| –¢–µ—Å—Ç | –ü—Ä–æ–≤–µ—Ä–æ–∫ | –í—Ä–µ–º—è | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|------|----------|-------|----------------|
| Health Check | 6 | ~5s | üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–π |
| Workflow | 5 | ~3s | üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–π |
| **–ò–¢–û–ì–û** | **11** | **~8s** | - |

---

## ‚úÖ –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∏ —Ç–µ—Å—Ç—ã?

- ‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Docker –æ–±—Ä–∞–∑–æ–≤
- ‚úÖ –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ production
- ‚úÖ –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –í CI/CD pipeline

---

**Built by KomarovAI** | Essential Tests ‚úÖ | Fast & Reliable ‚ö° | Production-Ready üöÄ
